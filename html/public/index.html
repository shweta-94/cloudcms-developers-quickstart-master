<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

    <script src="bower_components/handlebars/handlebars.js"></script>

    <title>Welcome Page</title>

    <h1>List of you custom definitions</h1>


</head>
<body>

<div id="DocumentResults"></div>
<script id="document-template" type="text/x-handlebars-template">
    <div>
        {{#each this}}
        <div class="row">
            <div class="col-md-12">
                <h2>{{title}}</h2>
                {{#DocumentList}}
                <p>{{DocumentName}} at {{DocumentLocation}}</p>
                {{/DocumentList}}
            </div>
        </div>
        {{/each}}

        <p>There are no documents available at this time</p>

    </div>
</script>

</body>

<script type="text/javascript">
    Gitana.connect({
        "clientKey": "{{{clientKey}}}",
        "clientSecret": "{{{clientSecret}}}",
        "username": "{{{username}}}",
        "password": "{{{password}}}",
        "baseURL": "{{{baseURL}}}",
        "application": "{{{application}}}"
    }, function(err) {
        var array = [];
        this.datastore("content").readBranch("master").listDefinitions('custom', {
            "limit": -1
        }).each(function() {

            array.push({
                "title": this.title,
                "value": this._doc
            });
        }).then(function() {
            var source = $("#document-template").html();
            var template = Handlebars.compile(source);
            var html = template(array);
            $('#DocumentResults').html(html);
        });

            // var template = Handlebars.compile("");

            // document.getElementById('cat').innerHTML = this ;

            // var model = req.model;
            // if (!model) {
            //     model = {};
            // }
            //
            // model.title = "Installing Sample Project";
            // model.message = "Please wait while the sample project is installed";
            // model.jobId = jobId;
            //
            // var result = template(model);


            // document.getElementById('cat-list').innerHTML = {
            //     cats: array
            // };
            // // var renderCats = Handlebars.compile(menu);
            // document.getElementById('cat').innerHTML = renderCats({
            //     cats: array
            // });

            // document.getElementById('cat-list').innerHTML = array;
            //
            // document.getElementById('cat').innerHTML = {
            //     cats: this
            // };

            // document.getElementById('cat').innerHTML = this.title;
            //
            // html += "<tr>";
            // // image
            // html += "<td>";
            // html += "</br>";
            // html += "</br>";
            // html += "</td>";
            // html += "<td>";
            // html += "<h3>" + "TITLE" + this.title + "</h3>";
            //
            //
            // html += "<ul class=" + "list-group" + ">";
            // html += "<li>" + this.title;
            //
            // html += "<h3>" + "Qname" + this.getQName() + "</h3>";
            // // html += "<img height='100' width='100' src='http://localhost/proxy/repositories/" + this.getRepositoryId() + "/branches/" + this.getBranchId() + "/nodes/" + this.getId() + "/attachments/default'> ";
            // html += "</li>";
            // html += "</ul>";
            //
            //
            // html += "</td>";
            // html += "</tr>";
        // })
    });

</script>
</html>