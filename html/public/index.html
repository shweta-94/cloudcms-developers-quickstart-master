<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

    <script src="bower_components/handlebars/handlebars.js"></script>

    <title>Welcome Page</title>

    <h1>List of you custom definitions</h1>


</head>
<body id="page-top">

<div id = "list">
<div id="cat">
    {{#each cats}}
    <div class="cat">
        <h1>{{title}}</h1>
        <!--<p>Age: {{age}}</p>-->
    </div>
    {{/each}}
    <!--<h1>{{title}}</h1>-->
</div>
</div>

<div id="result"></div>

</body>

<script type="text/javascript">
    Gitana.connect({
        "clientKey": "{{{clientKey}}}",
        "clientSecret": "{{{clientSecret}}}",
        "username": "{{{username}}}",
        "password": "{{{password}}}",
        "baseURL": "{{{baseURL}}}",
        "application": "{{{application}}}"
    }, function(err) {
        var html = "<table>";
        this.datastore("content").readBranch("master").listDefinitions('custom', {
            "limit": -1
        }).then(function() {

            var div = document.getElementById('list').innerHTML;
            var renderCats = Handlebars.compile(div);
            document.getElementById('cat').innerHTML = renderCats({
                cats: this
            });
            //
            // document.getElementById('cat').innerHTML = {
            //     cats: this
            // };

            // document.getElementById('cat').innerHTML = this.title;
            //
            // html += "<tr>";
            // // image
            // html += "<td>";
            // html += "</br>";
            // html += "</br>";
            // html += "</td>";
            // html += "<td>";
            // html += "<h3>" + "TITLE" + this.title + "</h3>";
            //
            //
            // html += "<ul class=" + "list-group" + ">";
            // html += "<li>" + this.title;
            //
            // html += "<h3>" + "Qname" + this.getQName() + "</h3>";
            // // html += "<img height='100' width='100' src='http://localhost/proxy/repositories/" + this.getRepositoryId() + "/branches/" + this.getBranchId() + "/nodes/" + this.getId() + "/attachments/default'> ";
            // html += "</li>";
            // html += "</ul>";
            //
            //
            // html += "</td>";
            // html += "</tr>";
        })
    });

</script>
</html>