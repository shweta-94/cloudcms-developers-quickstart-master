<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>


    <title>All the Authors in your Sample Project</title>
    <script>
        Gitana.connect({
            "clientKey": "{{{clientKey}}}",
            "clientSecret": "{{{clientSecret}}}",
            "username": "{{{username}}}",
            "password": "{{{password}}}",
            "baseURL": "{{{baseURL}}}",
            "application": "{{{application}}}"
        }, function(err) {
            var html = "<table>";
            this.datastore("content").readBranch("master").queryNodes({
                "_type": "my:author"
            }).each(function() {

                var template = document.getElementById('template').innerHTML;
                var renderCat = Handlebars.compile(template);
                document.getElementById('author').innerHTML = renderCat(this);


                html += "<tr>";
                // image
                html += "<td>";
                html += "<img height='100' width='100' src='http://localhost/proxy/repositories/" + this.getRepositoryId() + "/branches/" + this.getBranchId() + "/nodes/" + this.Image.id + "/attachments/default'> ";
                html += "</br>";
                html += "</br>";
                html += "</td>";
                html += "<td>";
                html += "<h3>" + this.title + "</h3>";
                html += "<p>" + this.Description + "</p>";
                html += "</td>";
                html += "</tr>";
            }).then(function() {
                html += "</table>";
                $("#result").append(html);
            });
        });
    </script>

    <template id="template">
        <div class="author">
            <h1>{{title}}</h1>
            <p>Description: {{Description}}</p>
        </div>
    </template>


</head>
<body>
<h1>Cloud CMS Example (using Proxy)</h1>
<div id="result"></div>
</body>
</html>