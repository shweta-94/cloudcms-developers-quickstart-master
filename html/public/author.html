<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

    <script src="bower_components/handlebars/handlebars.js"></script>

    <title>Welcome Page</title>

    <h1>List of your custom definitions</h1>
    <button type="button" onclick="myFunction()">Try it</button>
    <p id="demo">A Paragraph.</p>




</head>
<body id="page-top">

<div id="new-list">
    <p>ere : {{title}}</p>
</div>

<div id="DocumentResults"></div>
<script id="document-template" type="text/x-handlebars-template">
    <div>
        {{#each this}}
        <div class="row">
            <div class="col-md-12">
                <h2>{{Category}}</h2>
                {{#DocumentList}}
                <p>{{DocumentName}} at {{DocumentLocation}}</p>
                {{/DocumentList}}
            </div>
        </div>
        {{/each}}

        <p>There are no documents available at this time</p>

    </div>
</script>


</body>

<script type="text/javascript">
    function myFunction() {
        Gitana.connect({
            "clientKey": "{{{clientKey}}}",
            "clientSecret": "{{{clientSecret}}}",
            "username": "{{{username}}}",
            "password": "{{{password}}}",
            "baseURL": "{{{baseURL}}}",
            "application": "{{{application}}}"
        }, function (err) {
            var array = [];
            this.datastore("content").readBranch("master").listDefinitions('custom', {
                "limit": -1
            }).each(function () {
                array.push(this.title);
                array.push(this.getQName());
            }).then(function () {
                document.getElementById('new-list').innerHTML = array;
                document.getElementById("demo").innerHTML = "Paragraph changed.";
                return array
            })
        });
    }

    $(function() {
        var source = $("#document-template").html();
        var template = Handlebars.compile(source);
        var html = template(data);
        $('#DocumentResults').html(html);
    });



    var data = [
        {
            Category: "General",
            DocumentList: [
                {
                    DocumentName: "Document Name 1 - General",
                    DocumentLocation: "Document Location 1 - General"
                },
                {
                    DocumentName: "Document Name 2 - General",
                    DocumentLocation: "Document Location 2 - General"
                }
            ]
        },
        {
            Category: "Unit Documents",
            DocumentList: [
                {
                    DocumentName: "Document Name 1 - Unit Documents",
                    DocumentList: "Document Location 1 - Unit Documents"
                }
            ]
        },
        {
            Category: "Minutes"
        }
    ];
</script>
</html>