<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

    <script src="bower_components/handlebars/handlebars.js"></script>

    <title>Welcome Page</title>

    <h1>List of your custom definitions</h1>

    <section id="content">
        <header class="page-header mb30">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <h1>
                            <a href="/catalog/index.html">Authors</a>
                        </h1>
                    </div>
                </div>
            </div>
        </header>
        <section class="pt30 pb30">
            <div class="container clearfix">
                <div class="row">

                    <!-- categories filter -->
                    <nav id="filter" class="span12 text-center">
                        <div class="btn-group">
                            <a href="" class="btn btn-default" data-filter="*">All</a>
                            <a href="" class="btn btn-default" data-filter=".chocolate">Chocolate</a>
                            <a href="" class="btn btn-default" data-filter=".strawberry">Strawberry</a>
                            <a href="" class="btn btn-default" data-filter=".birthdays">Birthdays</a>
                            <a href="" type="button" class="btn btn-default"  data-filter=".holidays">Holidays</a>
                        </div>
                    </nav>

                    <!-- items -->
                    <div class="portfolio-items isotopeWrapper clearfix imgHover neko-hover-1" id="3">

                        <p><a href="#" onClick="myFunction();">Text</a></p>

                        {#rows}
                        <article class="col-sm-4 isotopeItem {#categories}{.} {/categories}">
                            <div class="pinBox">
                                <figure>
                                    <a href="product.html?id={_doc}" title="link" data-insight-action="click-product" data-insight-node="{insightNode}">
                                        <img style="width:326px" alt="{title}" src="/preview/node/{_doc}/thumbnail?width=326&mimetype=image/jpeg" class="img-responsive">
                                    </a>
                                    <figcaption>
                                        <ul class="pinInfo">
                                            <li><a href=""><i class="icon-eye"></i>150</a></li>
                                            <li><a href=""><i class="icon-comment-1"></i>4</a></li>
                                            <li><a href=""><i class="icon-heart"></i>32</a></li>
                                        </ul>
                                        <div class="iconLinks">
                                            <a href="product.html?id={_doc}" title="link"><i class="icon-picture "></i></a>
                                            <a href="product.html?id={_doc}" class="image-link" title="Zoom" ><i class="icon-search"></i></a>
                                        </div>
                                    </figcaption>
                                </figure>
                                <section class="boxContent">
                                    <h3>{title}</h3>
                                    <p>
                                        {summary}
                                        <br />
                                        <a href="product.html?id={_doc}" class="moreLink">&rarr; read more</a>
                                    </p>
                                </section>
                            </div>
                        </article>
                        {/rows}
                        {/query}

                    </div>
                </div>
            </div>
        </section>
    </section>
</head>
<body id="page-top">

<div id="new-list">
</div>


</body>

<script type="text/javascript">
    function myFunction() {
        Gitana.connect({
            "clientKey": "{{{clientKey}}}",
            "clientSecret": "{{{clientSecret}}}",
            "username": "{{{username}}}",
            "password": "{{{password}}}",
            "baseURL": "{{{baseURL}}}",
            "application": "{{{application}}}"
        }, function (err) {
            var array = [];
            this.datastore("content").readBranch("master").listDefinitions('custom', {
                "limit": -1
            }).each(function () {
                array.push({
                        "title": this.title
                    });
                array.push(this.getQName());
            }).then(function () {
                var template = document.getElementById('content').innerHTML;
                var renderCat = Handlebars.compile(template);
                document.getElementById('boxContent').innerHTML = renderCat(array);
                return array;
            })
        });


    }
</script>
</html>