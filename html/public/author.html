<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="vendor/jquery/jquery.js"></script>
    <script src="vendor/gitana/gitana.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

    <script src="bower_components/handlebars/handlebars.js"></script>

    <title>Authors Page</title>

    <h1>List of All Authors</h1>
</head>
<body>

    <script id="document-template" type="text/x-handlebars-template">
        <div>
            <h2> erere </h2>
            {{#each apidata}}
            <div class="row">
                <h2>{{apidata}}</h2>
                <!--<div class="col-md-12">-->
                    <!--<h2>{{title}}</h2>-->
                <!--</div>-->
            </div>
            {{/each}}
        </div>
    </script>

    <div id="new-list"></div>

    <div id="DocumentResults"></div>
</body>


<script type="text/javascript">
    var array = [];
    Gitana.connect({
        "clientKey": "{{{clientKey}}}",
        "clientSecret": "{{{clientSecret}}}",
        "username": "{{{username}}}",
        "password": "{{{password}}}",
        "baseURL": "{{{baseURL}}}",
        "application": "{{{application}}}"
    }, function(err) {

        this.datastore("content").readBranch("master").queryNodes({
            "_type": "store:author"
        }).each(function() {
            array.push({
                "title" : this.title
            });
            // array.push(this._doc);

        }).then(function() {
            var source = $("#document-template").html();
            var template = Handlebars.compile(source);
            var html = template({
                apidata: array
            });
            $('#DocumentResults').html(html);

            document.getElementById('new-list').innerHTML = array;
            // $("#result").append(html);
        });
    });

</script>

